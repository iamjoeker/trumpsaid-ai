interface IVideo {
  published: Boolean @default(value: "false")
  advertisingEnabled: Boolean @default(value: "false")
  views: Int @default(value: "0")
  webmLink: VideoStorageLink
  mp4Link: VideoStorageLink
  transcription: [TranscriptionItem!]!
  source: Source
}

interface StorageItem {
  id: ID! @unique
  videoID: ID!
  path: String!
  bucket: String!
}

type VideoMetadata {
  title: String
  subtitle: String
  transcript: [TranscriptionItem!]!
  advertisingEnabled: Boolean! @default(value: "false")
  tags: [Tag!]!
  sources: [Source!]!
  dateRecorded: Date
  views: Int! @default(value: "0")
}

type User {
  id: ID! @unique
  email: String
  auth0Id: String @unique
  role: Role @default(value: "USER")
  displayName: String
  avatar: String
  givenName: String
  familyName: String
  adminRoles: [AdminRole] @default(value: [])
}

type VideoUpload implements IVideo {
  id: ID! @unique
  createdAt: DateTime!
  updatedAt: DateTime!
  submitedBy: User! @relation(name: "VideoSubmitter")
  publishedBy: User @relation(name: "VideoPublisher")
  publishedVideo: Video
  submitedUrl: String! @unique
  status: VideoUploadStatus!
  state: VideoUploadState! @default(value: "PENDING")
  autoTranscription: [String!]!
  published: Boolean! @default(value: "false")
  rawStorageLink: VideoStorageLink @relation(name: "VideoStorageRawRelation")
  webmLink: VideoStorageLink @relation(name: "VideoWebmLinkRelation")
  mp4Link: VideoStorageLink @relation(name: "VideoMp4LinkRelation")
  flacLink: VideoStorageLink @relation(name: "VideoFlacLinkRelation")
  metadata: VideoMetadata @relation(name: "VideoUploadMetadataRelation")
  thumbnail: Thumbnail
}

type Tag {
  id: ID! @unique
  name: String!
  videos: [Video!]!
}

type TranscriptionItem {
  speaker: Speaker!
  timestampStart: Int!
  content: String!
  sentiment: Float
}

type Source {
  publication: Publication!
  url: String!
  title: String
  videos: [Video!]!
  priority: Int! @default(value: "5")
}

type Video implements IVideo {
  id: ID! @unique
  published: Boolean @default(value: "false")
  advertisingEnabled: Boolean @default(value: "false")
  views: Int @default(value: "0")
}

type Speaker {
  name: String! @unique
  avatarPath: String!
  title: String!
}

type Date {
  month: Int!
  day: Int!
  year: Int!
}

type Publication {
  avatarPath: String!
  name: String!
}

type VideoStorageLink implements StorageItem {
  id: ID! @unique
  videoID: ID!
  path: String!
  bucket: String!
  version: VideoVersion!
}

type Thumbnail implements StorageItem {
  id: ID! @unique
  videoID: ID!
  path: String!
  bucket: String!
}
