interface IVideo {
  published: Boolean @default(value: "false")
  advertisingEnabled: Boolean @default(value: "false")
  views: Int @default(value: "0")
  webmLink: VideoStorageLink
  mp4Link: VideoStorageLink
  source: Source
}

interface StorageItem {
  id: ID! @unique
  videoID: ID!
  path: String!
  bucket: String!
}

type VideoMetadata {
  title: String
  subtitle: String
  advertisingEnabled: Boolean! @default(value: "false")
  tags: [Tag!]!
  sources: [Source!]!
  dateRecorded: Date
  views: Int! @default(value: "0")
}

type User {
  id: ID! @unique
  email: String
  auth0Id: String @unique
  role: Role @default(value: "USER")
  displayName: String
  avatar: String
  givenName: String
  familyName: String
  adminRoles: [AdminRole] @default(value: [])
}

type VideoUpload implements IVideo {
  id: ID! @unique
  createdAt: DateTime!
  updatedAt: DateTime!
  submitedBy: User! @relation(name: "VideoSubmitter")
  publishedBy: User @relation(name: "VideoPublisher")
  publishedVideo: Video
  submitedUrl: String! @unique
  status: VideoUploadStatus!
  state: VideoUploadState! @default(value: "PENDING")
  published: Boolean! @default(value: "false")
  rawStorageLink: VideoStorageLink
    @relation(name: "VideoStorageRawRelation", onDelete: CASCADE)
  webmLink: VideoStorageLink
    @relation(name: "VideoWebmLinkRelation", onDelete: CASCADE)
  mp4Link: VideoStorageLink
    @relation(name: "VideoMp4LinkRelation", onDelete: CASCADE)
  flacLink: VideoStorageLink
    @relation(name: "VideoFlacLinkRelation", onDelete: CASCADE)
  metadata: VideoMetadata
    @relation(name: "VideoUploadMetadataRelation", onDelete: CASCADE)
  thumbnail: Thumbnail
    @relation(name: "VideoUploadThumbnailRelation", onDelete: CASCADE)
  generatedConversation: SpeechAPIConversation
    @relation(name: "SpeechAPIConversationVideoRelation", onDelete: CASCADE)
}

type Tag {
  id: ID! @unique
  name: String!
  videos: [Video!]!
}

type Source {
  publication: Publication!
  url: String!
  title: String
  videos: [Video!]!
  priority: Int! @default(value: "5")
}

type Video implements IVideo {
  id: ID! @unique
  published: Boolean @default(value: "false")
  advertisingEnabled: Boolean @default(value: "false")
  views: Int @default(value: "0")
}

type Speaker {
  name: String! @unique
  avatarPath: String!
  title: String!
}

type Date {
  month: Int!
  day: Int!
  year: Int!
}

type Publication {
  avatarPath: String!
  name: String!
}

type VideoStorageLink implements StorageItem {
  id: ID! @unique
  videoID: ID!
  path: String!
  bucket: String!
  version: VideoVersion!
}

type Thumbnail implements StorageItem {
  id: ID! @unique
  videoID: ID!
  path: String!
  bucket: String!
}

type SpeechAPIWord {
  id: ID! @unique
  startTime: Int!
  endTime: Int!
  word: String!
  speakerTag: Int!
  video: VideoUpload! @relation(name: "SpeechAPIWordVideoRelation")
}

type SpeechAPIConversationBlock {
  id: ID! @unique
  speakerTag: Int!
  words: [SpeechAPIWord!]!
  video: VideoUpload! @relation(name: "SpeechAPIConversationBlockVideoRelation")
}

type SpeechAPIConversation {
  id: ID! @unique
  video: VideoUpload! @relation(name: "SpeechAPIConversationVideoRelation")
  conversation: [SpeechAPIConversationBlock!]!
}
